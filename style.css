:root{
    /* neutral defaults; JS can override via applyPrimary */
    --accent-100:#e5e7eb; /* gray-200 */
    --accent-400:#9ca3af; /* gray-400 */
    --accent-500:#6b7280; /* gray-500 */
    --text-strong:var(--accent-500);
    --text-muted:#9aa0a6;
    --bg:#f5f6fa;
    --card-bg:#ffffff;
    --bar-bg:#eff0f3;
    --shadow:0 12px 40px rgba(255,111,160,.25);
}

/* Dark theme */
:root[data-theme="dark"]{
    --card-bg:rgb(44, 44, 44);
    --bar-bg:#242429;
    --text-muted:#b5b8bf;
    --shadow:0 12px 40px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:var(--bg);
    font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    color:#444;
}

.widget{
    width:min(92vw, 720px);
    max-width:100%;
    background:var(--card-bg);
    border-radius:24px;
    padding:clamp(16px, 4vw, 34px) clamp(16px, 5vw, 40px) clamp(14px, 3.5vw, 32px);
    box-shadow: var(--shadow);
}

.widget__header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}
.widget__header .week-badge{order:1}
.widget__header .ctrls{order:2}

.ctrls{display:flex;gap:10px;align-items:center}
.ctrls__dot{width:24px;height:24px;border-radius:999px;background:var(--accent-100);border:none;box-shadow:0 4px 10px rgba(0,0,0,.12);display:flex;align-items:center;justify-content:center;cursor:pointer}
.ctrls__dot--neutral{background:#f3f4f6;color:#333;box-shadow:inset 0 1px 0 rgba(255,255,255,.9), 0 2px 6px rgba(0,0,0,.1)}
:root[data-theme="dark"] .ctrls__dot--neutral{background:#3a3a3a;color:#f5f5f5;box-shadow:inset 0 1px 0 rgba(255,255,255,.06), 0 2px 8px rgba(0,0,0,.45)}
.ctrls__dot--swatch{outline:none}
.ctrls__dot:active{transform:translateY(1px)}

.week-badge{
    background:var(--accent-500);
    color:#fff;
    font-weight:700;
    padding:6px 12px;
    border-radius:14px; /* 更圆润 */
    font-size:13px;
}

.clock{ text-align:center; margin:clamp(8px,2.2vw,14px) 0 clamp(12px,3vw,22px) }
.clock span{
    font-weight:800;
    letter-spacing:2px;
    color:var(--text-strong);
    font-size:clamp(20px, 6.5vw, 60px);
    line-height:1;
    text-shadow:0 4px 14px rgba(0,0,0,.08);
}

.btn{background:var(--accent-500);color:#fff;border:none;border-radius:10px;padding:6px 10px;font-weight:600;cursor:pointer}
.btn--ghost{background:transparent;color:var(--text-muted);border:1px solid var(--accent-100)}

.stats{margin-top:6px}
.stat{display:flex;align-items:center;gap:clamp(8px,2vw,14px);margin:clamp(10px,2.4vw,16px) 0}
.stat__label{width:48px;font-weight:600;color:#666;font-size:clamp(12px,2.4vw,16px)}
.stat__pct{width:68px;text-align:right;color:var(--accent-500);font-weight:700;font-size:clamp(12px,2.4vw,16px)}
.stat__days{width:70px;text-align:right;color:var(--text-muted);font-size:clamp(12px,2.2vw,15px)}

.bar{flex:1;height:clamp(10px,2vw,14px);background:var(--bar-bg);border-radius:999px;overflow:hidden;position:relative}
.bar__fill{height:100%;width:0;background:linear-gradient(90deg,var(--accent-400),var(--accent-500));border-radius:999px;transition:width .6s cubic-bezier(.2,.8,.2,1)}

.quote{margin-top:18px;border-top:1px solid #e5e7eb;padding-top:16px;text-align:center}
.quote p{margin:0;color:#9ca3af;font-size:15px}
:root[data-theme="dark"] .quote{border-top:1px solid #3a3a3a}
:root[data-theme="dark"] .quote p{color:#8c8f96}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.2);display:none;align-items:center;justify-content:center;padding:16px}
.modal[aria-hidden="false"]{display:flex}
.modal__card{width:360px;max-width:92vw;background:var(--card-bg);border-radius:18px;box-shadow:var(--shadow);padding:16px 16px 14px}
.modal__title{margin:0 0 12px;color:var(--accent-500);font-weight:800}
.modal__date{width:100%;padding:10px;border-radius:10px;border:1px solid var(--accent-100);background:#f3f4f6;color:#333}
.modal__actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}

/* Color picker modal */
.picker{display:flex;gap:12px;align-items:center}
.picker__input{appearance:none;-webkit-appearance:none;border:none;width:52px;height:36px;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.picker__input::-webkit-color-swatch-wrapper{padding:0}
.picker__input::-webkit-color-swatch{border:none;border-radius:10px}
.picker__swatches{display:flex;gap:8px;flex-wrap:wrap}
.picker__swatches button{width:28px;height:28px;border-radius:8px;border:1px solid var(--accent-100);box-shadow:0 1px 4px rgba(0,0,0,.06);cursor:pointer}

/* Custom calendar */
.cal{background:var(--card-bg);border:1px solid var(--accent-100);border-radius:12px;padding:10px}
.cal__head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.cal__title{font-weight:700;color:#6b7280}
:root[data-theme="dark"] .cal__title{color:#e5e7eb}
.cal__grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.cal__dow{font-size:12px;color:var(--text-muted);text-align:center}
.cal__day{padding:6px 0;text-align:center;border-radius:8px;cursor:pointer;color:#6b7280}
:root[data-theme="dark"] .cal__day{color:#e5e7eb}
.cal__day--muted{opacity:.35}
.cal__day:hover{background:var(--accent-100)}
.cal__day--sel{background:var(--accent-500);color:#fff}

@media (max-width:520px){
    .clock span{font-size:64px}
}

